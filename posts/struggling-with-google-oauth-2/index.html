<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.0ed7eb5f679808145623.css">html{font-size:100}body{margin:0;color:#222;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{max-width:100%;margin:inherit auto}hr,img{border:0;display:block}hr{color:#222;height:26px;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#222 0,#222 15px,transparent 0,transparent 26px);width:6.25rem}a{color:#5d93ff;text-decoration:none}a:active,a:focus,a:hover{color:#f7a046}b,strong{font-weight:600}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#222;font-size:.875rem;font-style:italic;margin-bottom:0;text-align:center}.anchor{margin-left:-1.875rem!important;padding-right:.875rem!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.Author-module--author__photo--HnDWV{display:inline-block;margin-bottom:0;border-radius:50%;background-clip:padding-box}.Author-module--author__title--ZztQd{font-size:1.125rem;font-weight:600;line-height:1.82813rem;margin:.8125rem 0}.Author-module--author__title-link--BY7f8,.Author-module--author__title-link--BY7f8:focus,.Author-module--author__title-link--BY7f8:hover{color:#222}.Author-module--author__subtitle--3hbMX{color:#888;line-height:1.625rem;margin-bottom:1.625rem}.Icon-module--icon--1T2h2{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor;font-style:normal;font-weight:400;speak:none;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Contacts-module--contacts--3fb7G{margin-bottom:1.625rem}.Contacts-module--contacts__list--27zok{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;padding:0;margin:.625rem -.1875rem;width:8.75rem}.Contacts-module--contacts__list-item--1Adud{padding:0;margin:.25rem;display:flex;align-content:center;align-items:center;justify-content:center;height:35px;width:2.1875rem;line-height:2.1875rem;border-radius:50%;text-align:center;border:1px solid #ebebeb}.Contacts-module--contacts__list-item-link--2L60c{border:0;display:flex;color:#222}.Contacts-module--contacts__list-item-link--2L60c:focus,.Contacts-module--contacts__list-item-link--2L60c:hover{color:#5d93ff}.Copyright-module--copyright--1YLES{color:#b6b6b6;font-size:.875rem}.Menu-module--menu--2aN3O{margin-bottom:1.625rem}.Menu-module--menu__list--1uKDu{list-style:none;padding:0;margin:0}.Menu-module--menu__list-item--27cxj{padding:0;margin:.625rem 0}.Menu-module--menu__list-item-link--29Sd-{font-size:1rem;color:#222;font-weight:400;border:0}.Menu-module--menu__list-item-link--29Sd-:focus,.Menu-module--menu__list-item-link--29Sd-:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Menu-module--menu__list-item-link--active--2HzKy{color:#222;border-bottom:1px solid #222}.Layout-module--layout--EpQHE{max-width:66.875rem;margin-left:auto;margin-right:auto}.Layout-module--layout--EpQHE:before{content:"";display:table}.Layout-module--layout--EpQHE:after{content:"";display:table;clear:both}.Sidebar-module--sidebar--1zM7S{width:100%}.Sidebar-module--sidebar__inner--2Tprz{position:relative;padding:1.5625rem 1.25rem 0}@media screen and (min-width:685px){.Sidebar-module--sidebar--1zM7S{width:calc(41.625% - 1.09375rem)}.Sidebar-module--sidebar--1zM7S:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--1zM7S:last-child{margin-right:0}.Sidebar-module--sidebar--1zM7S:nth-child(12n){margin-right:0;float:right}.Sidebar-module--sidebar--1zM7S:nth-child(12n+1){clear:both}.Sidebar-module--sidebar__inner--2Tprz{padding:1.875rem 1.25rem 0}.Sidebar-module--sidebar__inner--2Tprz:after{background:#e6e6e6;background:-webkit-gradient(linear,left top,left bottom,from(#e6e6e6),color-stop(48%,#e6e6e6),to(#fff));background:linear-gradient(180deg,#e6e6e6 0,#e6e6e6 48%,#fff);position:absolute;content:"";width:.0625rem;height:540px;top:30px;right:-10px;bottom:0}}@media screen and (min-width:960px){.Sidebar-module--sidebar--1zM7S{width:calc(33.3% - 1.25rem)}.Sidebar-module--sidebar--1zM7S:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--1zM7S:last-child{margin-right:0}.Sidebar-module--sidebar--1zM7S:nth-child(3n){margin-right:0;float:right}.Sidebar-module--sidebar--1zM7S:nth-child(3n+1){clear:both}.Sidebar-module--sidebar__inner--2Tprz{padding:2.5rem}}.Author-module--author--2kf8a{border-top:1px solid #e6e6e6;max-width:40rem;padding-top:1.25rem;line-height:1.625rem;margin-top:1.625rem;margin-bottom:3.25rem}.Author-module--author__bio-twitter--MufFK{display:block;text-decoration:underline}@media screen and (min-width:685px){.Author-module--author--2kf8a{margin-left:auto;margin-right:auto}}.Content-module--content--1tfQQ{max-width:59.0625rem;padding:0 .9375rem;margin:0 auto}.Content-module--content__title--1qFLI{font-size:2rem;max-width:40rem;font-weight:600;text-align:center;line-height:2.68125rem;margin:1.625rem auto 0}.Content-module--content__body--2bfha figure{margin-bottom:1.625rem}.Content-module--content__body--2bfha figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.Content-module--content__body--2bfha figure blockquote p{max-width:40rem;font-size:1.6817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.Content-module--content__body--2bfha a{text-decoration:underline}.Content-module--content__body--2bfha *{max-width:40rem;margin-left:auto;margin-right:auto}.Content-module--content__body--2bfha img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--1tfQQ{padding:0}.Content-module--content__title--1qFLI{font-size:3rem;line-height:3.65625rem;margin-top:3.65625rem;margin-bottom:2.4375rem}.Content-module--content__body--2bfha,.Content-module--content__body--2bfha p{font-size:1.125rem;line-height:1.82813rem;margin-bottom:1.82813rem}}.Meta-module--meta__date--3FNDv{font-style:italic}.Tags-module--tags--1oNz4{margin-bottom:.8125rem}.Tags-module--tags__list--2UTD-{list-style:none;margin:0 -.625rem;padding:0}.Tags-module--tags__list-item--b7tap{display:inline-block;margin:.625rem .3125rem}.Tags-module--tags__list-item-link--1hQL0{display:inline-block;height:35px;padding:0 1.5rem;line-height:2.1875rem;border:1px solid #e6e6e6;text-decoration:none;border-radius:1.25rem;color:#222}.Tags-module--tags__list-item-link--1hQL0:focus,.Tags-module--tags__list-item-link--1hQL0:hover{color:#5d93ff}.Post-module--post__comments--2T8dL,.Post-module--post__footer--1BvmJ{max-width:40rem;margin:0 auto;padding:0 .9375rem}.Post-module--post__home-button--3zx_9{display:block;max-width:5.625rem;height:35px;padding:0 1.5rem;line-height:2.1875rem;text-align:center;color:#222;border:1px solid #e6e6e6;border-radius:1.25rem;font-size:1rem;font-weight:400;margin-left:auto;margin-right:auto;margin-top:1.625rem}.Post-module--post__home-button--3zx_9:focus,.Post-module--post__home-button--3zx_9:hover{color:#5d93ff}@media screen and (min-width:960px){.Post-module--post__comments--2T8dL,.Post-module--post__footer--1BvmJ{padding:0}.Post-module--post__home-button--3zx_9{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}.Feed-module--feed__item--Bm0MP{margin-bottom:2.03125rem}.Feed-module--feed__item--Bm0MP:last-child{margin-bottom:.8125rem}.Feed-module--feed__item-title--34sOw{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.Feed-module--feed__item-title-link--2qfTF{color:#222}.Feed-module--feed__item-title-link--2qfTF:focus,.Feed-module--feed__item-title-link--2qfTF:hover{color:#222;border-bottom:1px solid #222}.Feed-module--feed__item-description--2_Zuy{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.Feed-module--feed__item-meta-time--3hc6b{font-size:.875rem;color:#222;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-divider--2GeAw{margin:0 .3125rem}.Feed-module--feed__item-meta-category-link--lAu1I{font-size:.875rem;color:#f7a046;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-category-link--lAu1I:focus,.Feed-module--feed__item-meta-category-link--lAu1I:hover{color:#5d93ff}.Feed-module--feed__item-readmore--rMfbv{font-size:1rem;color:#5d93ff}.Feed-module--feed__item-readmore--rMfbv:focus,.Feed-module--feed__item-readmore--rMfbv:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Page-module--page--V2155{margin-bottom:3.25rem}.Page-module--page__inner--3xzwp{padding:1.5625rem 1.25rem}.Page-module--page__title--t1zKX{font-size:2.5rem;font-weight:600;line-height:3.25rem;margin-top:0;margin-bottom:2.35625rem}.Page-module--page__body--1A7TB{font-size:1rem;line-height:1.625rem;margin:0 0 1.625rem}@media screen and (min-width:685px){.Page-module--page--V2155{width:calc(58.275% - .78125rem)}.Page-module--page--V2155:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--V2155:last-child{margin-right:0}.Page-module--page--V2155:nth-child(12n){margin-right:0;float:right}.Page-module--page--V2155:nth-child(12n+1){clear:both}.Page-module--page__inner--3xzwp{padding:1.875rem 1.25rem}}@media screen and (min-width:960px){.Page-module--page--V2155{width:calc(66.6% - .625rem)}.Page-module--page--V2155:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--V2155:last-child{margin-right:0}.Page-module--page--V2155:nth-child(3n){margin-right:0;float:right}.Page-module--page--V2155:nth-child(3n+1){clear:both}.Page-module--page__inner--3xzwp{padding:2.5rem 2.1875rem}}.ProjectFeed-module--project-feed__h1--3ymyC{margin-top:0}.ProjectFeed-module--project-feed__item--3m_p-{margin-bottom:2.03125rem;border:1px solid #e6e6e6;margin-left:-.8125rem;margin-right:-.8125rem;padding:.8125rem}.ProjectFeed-module--project-feed__item--3m_p-:last-child{margin-bottom:.8125rem}.ProjectFeed-module--project-feed__item-title--2jqUk{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.ProjectFeed-module--project-feed__item-title-link--LPixb{color:#222}.ProjectFeed-module--project-feed__item-content-description--t0ccv{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.ProjectFeed-module--project-feed__item-content-description--t0ccv div{display:flex;justify-content:space-between}.ProjectFeed-module--project-feed__item-content-description-technologies--3fnfk{font-style:italic}.ProjectFeed-module--project-feed__item-content-description-github--1Y9dy{display:flex;align-content:center}.ProjectFeed-module--project-feed__item-content-description-github--1Y9dy span{margin-left:1.21875rem}.ProjectFeed-module--project-feed__item-content-body--pXIZz img{max-width:100%}.ProjectFeed-module--project-feed__item-content-body--pXIZz p{text-align:center;font-size:.75rem}.ProjectFeed-module--project-feed__item-meta-time--1LeKJ{font-size:.875rem;color:#222;font-weight:600;text-transform:uppercase}.Pagination-module--pagination--3T_m0{margin-top:3.25rem;display:flex}.Pagination-module--pagination__prev--3tRFv{width:50%;text-align:left}.Pagination-module--pagination__prev-link--2vesn{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__prev-link--2vesn:focus,.Pagination-module--pagination__prev-link--2vesn:hover{color:#5d93ff}.Pagination-module--pagination__prev-link--disable--1Fxw2{pointer-events:none;color:#bbb}.Pagination-module--pagination__next--19bJd{width:50%;text-align:right}.Pagination-module--pagination__next-link--3ln7y{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__next-link--3ln7y:focus,.Pagination-module--pagination__next-link--3ln7y:hover{color:#5d93ff}.Pagination-module--pagination__next-link--disable--AsM50{pointer-events:none;color:#bbb}</style><meta name="generator" content="Gatsby 2.13.50"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id="></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=cda87ad0ce853ad5b57cb751d9d6b7a4"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#F7A046"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=cda87ad0ce853ad5b57cb751d9d6b7a4"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=cda87ad0ce853ad5b57cb751d9d6b7a4"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=cda87ad0ce853ad5b57cb751d9d6b7a4"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=cda87ad0ce853ad5b57cb751d9d6b7a4"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=cda87ad0ce853ad5b57cb751d9d6b7a4"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=cda87ad0ce853ad5b57cb751d9d6b7a4"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=cda87ad0ce853ad5b57cb751d9d6b7a4"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=cda87ad0ce853ad5b57cb751d9d6b7a4"/><title data-react-helmet="true">Standalone Node API Server with Google OAuth | Part 2 - Portfolio by Nicholas Pung</title><meta data-react-helmet="true" name="description" content="After looking up documentation on how to best use Google OAuth, I&#x27;ve come to realize that majority of people writing online about Google OAuth use in applications that don&#x27;t have a separate REST API. Therefore, they are able to use sessions in order to have users continue using the application while logged in. Or another solution would be to store the session data in the database, and having the client look up the database during the whole user interaction, which sounds less than ideal to me."/><meta data-react-helmet="true" property="og:site_name" content="Standalone Node API Server with Google OAuth | Part 2 - Portfolio by Nicholas Pung"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Standalone Node API Server with Google OAuth | Part 2 - Portfolio by Nicholas Pung"/><link as="script" rel="preload" href="/styles-b8c4b39c370315638f3b.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-b1aec2f42648dd76d58c.js"/><link as="script" rel="preload" href="/2-f5f2ce27880a58f03a89.js"/><link as="script" rel="preload" href="/1-901ec0fac96c2ca12744.js"/><link as="script" rel="preload" href="/app-40d66d833e9ac403e6d2.js"/><link as="script" rel="preload" href="/webpack-runtime-f746537e741344b5f278.js"/><link as="fetch" rel="preload" href="/page-data\posts\struggling-with-google-oauth-2\page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="Layout-module--layout--EpQHE"><div><a class="Post-module--post__home-button--3zx_9" href="/posts">All Posts</a><div><div class="Content-module--content--1tfQQ"><h1 class="Content-module--content__title--1qFLI">Standalone Node API Server with Google OAuth | Part 2</h1><div class="Content-module--content__body--2bfha"><p>After looking up documentation on how to best use Google OAuth, I’ve come to realize that majority of people writing online about Google OAuth use in applications that don’t have a separate REST API. Therefore, they are able to use sessions in order to have users continue using the application while logged in. Or another solution would be to store the session data in the database, and having the client look up the database during the whole user interaction, which sounds less than ideal to me.</p>
<p>Another thing I learned was that Express is unable to send anything over a response, unless it’s with cookies. Therefore, the only way that I would be able to use the application the way I wanted (sending over a JSON Web Token), was to send over a cookie.</p>
<h2 id="background"><a href="#background" aria-label="background permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Background</h2>
<p>Initially, while learning about the different ways to do user authentication, I came across 2 types of ways hackers breach through security: cross site scripting (XSS) and cross-site request forgery (CSRF) attacks. In terms understandable for me, XSS attacks are when malicious sites adds on a Javascript tag in order to target users of an application, rather than the application itself. CSRF attacks are when malicious sites pose as the application to intercept restricted data based on the user logged in.</p>
<p>I hadn’t learned about these attacks when I first coded an user authentication application, thus I became scared about that possibility for an application that I would be using myself and storing about myself. Through research, what I found was that there are a few ways to mitigate CSRF attacks: only allowing POST requests to change data, sending a CSRF token attached to FORM fields and verifying them each time a POST request is made, and whitelisting websites in CORS. For XSS attacks: limit the time cookies are stored, deny all data being stored in HTML, and try not to use HTML elements that you are able to insert data into (e.g. contentEditable).</p>
<h2 id="solution"><a href="#solution" aria-label="solution permalink" class="anchor"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Solution</h2>
<p>Because of those concerns, I tried long and hard to find a solution that would essentially be sending over a JSON Web Token through a request, and having the client-side store the token to access restricted routes. The solution I used was to create a JSON Web Token from Google OAuth, then sending over the token in the cookies, which disappears in an absurdly fast manner. So the client application will have the read the cookie stored on the webpage as soon as the redirect happens, and store the token into localStorage. Although it’s not the most ideal solution, it’s the solution that is the most simple to execute on, with a small timeline where hacks can happen.</p>
<p>Resources:</p>
<ul>
<li><a href="https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html" target="_blank" rel="nofollow noopener noreferrer">https://cheatsheetseries.owasp.org/cheatsheets/Cross<em>Site</em>Scripting<em>Prevention</em>Cheat_Sheet.html</a></li>
<li><a href="https://www.owasp.org/index.php/Cross-site_Scripting_(XSS)" target="_blank" rel="nofollow noopener noreferrer">https://www.owasp.org/index.php/Cross-site<em>Scripting</em>(XSS)</a></li>
<li><a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)" target="_blank" rel="nofollow noopener noreferrer">https://www.owasp.org/index.php/Cross-Site<em>Request</em>Forgery_(CSRF)</a></li>
</ul></div></div></div><div class="Post-module--post__footer--1BvmJ"><div><p class="Meta-module--meta__date--3FNDv">Published <!-- -->9 Sep 2019</p></div><div class="Tags-module--tags--1oNz4"><ul class="Tags-module--tags__list--2UTD-"><li class="Tags-module--tags__list-item--b7tap"><a class="Tags-module--tags__list-item-link--1hQL0" href="/tag/passport-js/">PassportJS</a></li><li class="Tags-module--tags__list-item--b7tap"><a class="Tags-module--tags__list-item-link--1hQL0" href="/tag/node-js/">NodeJS</a></li></ul></div><div class="Author-module--author--2kf8a"><p>Software Developer. Podcast Aficionado. Powerlifting Enthusiast. All things health and wellness. Join me as I learn how to be the best programmer I can be.<a class="Author-module--author__bio-twitter--MufFK" href="https://github.com/nicholaspung" rel="noopener noreferrer" target="_blank"><strong>Nicholas Pung</strong> on Github</a></p></div></div><div class="Post-module--post__comments--2T8dL"></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/struggling-with-google-oauth-2/";window.webpackCompilationHash="63841685fccdcee2b769";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-40d66d833e9ac403e6d2.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-1595fd9bcd9902e26bdf.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-d4897e921ff4b51f2a92.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-383ab299798a763e951e.js"],"component---src-templates-tags-list-template-js":["/component---src-templates-tags-list-template-js-9ac8b37a23a7b64a5eec.js"],"component---src-templates-categories-list-template-js":["/component---src-templates-categories-list-template-js-569d0d421b2d1d0dbe8b.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-b1aec2f42648dd76d58c.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-770138ec962a7e29035e.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-4d61c1f2641e6a4c2beb.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-3e3566753dc318e5c4cd.js"],"component---src-templates-posts-template-js":["/component---src-templates-posts-template-js-7dfe267d61e7d29391e2.js"]};/*]]>*/</script><script src="/webpack-runtime-f746537e741344b5f278.js" async=""></script><script src="/app-40d66d833e9ac403e6d2.js" async=""></script><script src="/1-901ec0fac96c2ca12744.js" async=""></script><script src="/2-f5f2ce27880a58f03a89.js" async=""></script><script src="/component---src-templates-post-template-js-b1aec2f42648dd76d58c.js" async=""></script><script src="/styles-b8c4b39c370315638f3b.js" async=""></script></body></html>